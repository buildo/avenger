<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="302px" preserveAspectRatio="none" style="width:1422px;height:302px;" version="1.1" viewBox="0 0 1422 302" width="1422px" zoomAndPan="magnify"><defs><filter height="300%" id="fqiadj34h8sqd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="261" x="583.25" y="23.5352">Architecture Flow with cached Value</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="37" x2="37" y1="68.9766" y2="262.1504"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="454.5" x2="454.5" y1="68.9766" y2="262.1504"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="871" x2="871" y1="68.9766" y2="262.1504"/><rect fill="#FEFECE" filter="url(#fqiadj34h8sqd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="8" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="15" y="54.0234">Query</text><rect fill="#FEFECE" filter="url(#fqiadj34h8sqd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="8" y="261.1504"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="15" y="281.6855">Query</text><rect fill="#FEFECE" filter="url(#fqiadj34h8sqd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="424.5" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="431.5" y="54.0234">Cache</text><rect fill="#FEFECE" filter="url(#fqiadj34h8sqd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="424.5" y="261.1504"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="431.5" y="281.6855">Cache</text><rect fill="#FEFECE" filter="url(#fqiadj34h8sqd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="827" y="33.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="834" y="54.0234">CacheMap</text><rect fill="#FEFECE" filter="url(#fqiadj34h8sqd)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="827" y="261.1504"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="834" y="281.6855">CacheMap</text><polygon fill="#A80036" points="442.5,96.2871,452.5,100.2871,442.5,104.2871,446.5,100.2871" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="37.5" x2="448.5" y1="100.2871" y2="100.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="44.5" y="95.5449">getUser({ user: 1 })</text><polygon fill="#A80036" points="859.5,153.5635,869.5,157.5635,859.5,161.5635,863.5,157.5635" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="454.5" x2="865.5" y1="157.5635" y2="157.5635"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="461.5" y="152.8213">get CachedValue</text><path d="M876,113.2871 L876,184.2871 L1410,184.2871 L1410,123.2871 L1400,113.2871 L876,113.2871 " fill="#FBFB77" filter="url(#fqiadj34h8sqd)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1400,113.2871 L1400,123.2871 L1410,123.2871 L1400,113.2871 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="882" y="130.8555">{</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="472" x="890" y="146.166">[{ user: 1 }]: CacheValueResolved({ username: "Gigi", preferredColor: "red" }),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="505" x="890" y="161.4766">[{ user: 2 }]: CacheValueResolved({ username: "Sandro", preferredColor: "violet" }),</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="882" y="176.7871">}</text><polygon fill="#A80036" points="465.5,210.8398,455.5,214.8398,465.5,218.8398,461.5,214.8398" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="459.5" x2="870.5" y1="214.8398" y2="214.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="471.5" y="210.0977">CacheValueResolved({ username: "Gigi", preferredColor: "red" })</text><polygon fill="#A80036" points="48.5,240.1504,38.5,244.1504,48.5,248.1504,44.5,244.1504" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="42.5" x2="453.5" y1="244.1504" y2="244.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="393" x="54.5" y="239.4082">CacheValueResolved({ username: "Gigi", preferredColor: "red" })</text><!--
@startuml "CachedValue"

title
Architecture Flow with cached Value
end title

participant Query
participant Cache
participant CacheMap

Query -> Cache : getUser({ user: 1 })
Cache -> CacheMap : get CachedValue
note right
{
  [{ user: 1 }]: CacheValueResolved({ username: "Gigi", preferredColor: "red" }),
  [{ user: 2 }]: CacheValueResolved({ username: "Sandro", preferredColor: "violet" }),
}
end note
CacheMap -> Cache : CacheValueResolved({ username: "Gigi", preferredColor: "red" })
Cache -> Query : CacheValueResolved({ username: "Gigi", preferredColor: "red" })

@enduml

PlantUML version 1.2019.05(Sat Apr 20 18:45:36 CEST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_181-b13
Operating System: Mac OS X
OS Version: 10.14.5
Default Encoding: UTF-8
Language: en
Country: IT
--></g></svg>